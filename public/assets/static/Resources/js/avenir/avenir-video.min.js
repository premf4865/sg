var stlVideo=document.querySelector(".stl_video"),envMarket=tc_vars.env_market,videoId;if(stlVideo.dataset.videoid){var htmlCons='<div class="stl_consent" id="player_yt"><img src="/static/Resources/icons/SGAvenirStatusInfo32.svg" height="32" width="32" alt="" class="icon-white" /><span class="stl_title stl_title--4">Le visionnage de cette vidéo entraine un dépôt de cookies par la plateforme vidéo.</span><p class="stl_baseline">Pour poursuivre sa lecture, cliquez ici :</p><button class="stl_btn stl_btn--primarylight stl_btn--md" id="btAutoriser" onclick="envoyerSignalCMP();">Autoriser</button>';htmlCons+='<a href="/charte-cookies-societe-generale" id="consentLink" class="stl_link stl_link--tertiary stl_link--sm">Consulter notre politique de gestion des cookies</a></div>',stlVideo.innerHTML=htmlCons,videoId=stlVideo.dataset.videoid}var valueChannel=tc_vars.env_channel;if("webview"===valueChannel){var consentLink=document.getElementById("consentLink");consentLink.addEventListener("click",(function(e){e.preventDefault(),"particuliers"===envMarket?natif.ouvrirNavigateur("https://particuliers.sg.fr"+this.getAttribute("href")):"professionnels"===envMarket&&natif.ouvrirNavigateur("https://professionnels.sg.fr"+this.getAttribute("href"))}))}function VideosCMPControl(listeVideos){var VIDEO_CATEGORY="3";window.addEventListener("message",recevoirSignalCMP,!1);var listeVideos=listeVideos,i=0;for(i=0;i<listeVideos.length;i++){var elt=document.querySelector(listeVideos[i].selecteurVideoElt);null!=elt&&(listeVideos[i].element=elt)}function verifierCookiesVideoAcceptes(){var categories,cmpCookie=document.cookie.match("(^|;)\\s*TC_PRIVACY_CENTER\\s*=\\s*([^;]+)");return null!=cmpCookie&&(categories=cmpCookie.pop()),null!=categories&&categories.indexOf("3")>-1}function debloquerVideos(updateCookies){updateCookies&&cact("consent.update",{categories:{3:{status:"on"}}}),chargerVideos()}function chargerVideos(){var i=0;for(i=0;i<listeVideos.length;i++){var elt;if(listeVideos[i].element instanceof HTMLDivElement){function injectPlayerYT(){document.querySelector(".stl_video").innerHTML="<div id='player_yt'></div>"}setTimeout(injectPlayerYT,50),listeVideos[i].fnVideoInit()}}}function recevoirSignalCMP(event){switch(event.data){case"signalCMP1":debloquerVideos(!0)}}verifierCookiesVideoAcceptes()&&debloquerVideos(!1),this.debloquerVideos=debloquerVideos}var envoyerSignalCMP=function(){window.parent.postMessage("signalCMP1","*")};document.getElementById("btAutoriser").addEventListener("click",(function(){envoyerSignalCMP()}));var urlCourante=document.location.href;urlCourante=urlCourante.replace(/\/$/,"");var compteurAppel=0,heightYT="100%",widthYT="100%",arrayTime=[{time:!1,send:!1},{time:!1,send:!1},{time:!1,send:!1},{time:!1,send:!1}],infoVideo,duree,time;function chargerVideo(){var player;function videoYT(){if(++compteurAppel>2)return!1;if("undefined"!=typeof YT&&void 0!==YT.Player){function onPlayerReady(event){infoVideo=player.playerInfo.videoData,bddfTms.trackEvent(this,"video_load",{video_title:infoVideo.title,video_id:infoVideo.video_id})}player=new YT.Player("player_yt",{height:heightYT,width:widthYT,videoId:videoId,playerVars:{rel:0,modestbranding:1},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}});var done=!1;function onPlayerStateChange(event){if(-1==event.data)bddfTms.trackEvent(this,"video_play",{video_title:infoVideo.title,video_id:infoVideo.video_id});else if(event.data==YT.PlayerState.PLAYING){var timeLecture=Math.floor(player.playerInfo.currentTime);timeLecture<=1?bddfTms.trackEvent(this,"video_start",{video_title:infoVideo.title,video_id:infoVideo.video_id}):bddfTms.trackEvent(this,"video_start",{video_title:infoVideo.title,video_id:infoVideo.video_id,video_timestamp:timeLecture}),startInterval()}}function startInterval(){duree=Math.floor(player.playerInfo.duration),checkInt=setInterval((function(){(time=Math.floor(player.playerInfo.currentTime))>=.25*duree&&(arrayTime[0].time=!0,1==arrayTime[0].time&&0==arrayTime[0].send&&(arrayTime[0].send=!0,bddfTms.trackEvent(this,"video_progress",{video_title:infoVideo.title,video_id:infoVideo.video_id,video_progress:.25,video_timestamp:time}))),time>=.5*duree&&(arrayTime[1].time=!0,1==arrayTime[1].time&&0==arrayTime[1].send&&(arrayTime[1].send=!0,bddfTms.trackEvent(this,"video_progress",{video_title:infoVideo.title,video_id:infoVideo.video_id,video_progress:.5,video_timestamp:time}))),time>=.75*duree&&(arrayTime[2].time=!0,1==arrayTime[2].time&&0==arrayTime[2].send&&(arrayTime[2].send=!0,bddfTms.trackEvent(this,"video_progress",{video_title:infoVideo.title,video_id:infoVideo.video_id,video_progress:.75,video_timestamp:time}))),time>=.99*duree&&(arrayTime[3].time=!0,1==arrayTime[3].time&&0==arrayTime[3].send&&(arrayTime[3].send=!0,bddfTms.trackEvent(this,"video_end",{video_title:infoVideo.title,video_id:infoVideo.video_id,video_progress:1,video_timestamp:time})))}),1e3)}}else setTimeout(videoYT,400)}setTimeout(videoYT,400)}addEventListener("load",event=>{var CMPControl=new VideosCMPControl([{selecteurVideoElt:"#player_yt",fnVideoInit:chargerVideo}])});